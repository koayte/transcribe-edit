{% extends 'base.html' %}

{% block header %}
  <h2>{% block title %}Step 2: Transcribe{% endblock title %}</h2>
{% endblock header %}

{% block scripts %}
    <script>
        function copyToClipboard() {
            var copyText = document.getElementById("transcriptionResults");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
            document.getElementById("copyAlert").textContent = "Text copied to clipboard."
        }
        
        function textChanges() {
            var copyAlert = document.getElementById("copyAlert");
            if (copyAlert.textContent != "") {
                copyAlert.textContent = "";
            }
        }

    </script>
{% endblock scripts %}

{% block content %}
    <p>Transcription results:</p>
    <!-- <div class="content-container">
        <div class="text-container">
            <textarea id="transcriptionResults" oninput="textChanges()"
                  rows = "10">{{ transcription }}</textarea>
        </div>
        <div class="copy-button-container">
            <button onclick="copyToClipboard()">Copy</button>
            <p id="copyAlert"></p>
        </div>
        <div class="next-step-container">
            <button type="button" onclick="window.location.href='{{ url_for( 'pages.edit' ) }}';">Smart Edit >></button>
        </div>
    </div> -->

    <form method="post" action="/edit" class="content-container">
        <textarea name="transcriptionResults" id="transcriptionResults"
                  oninput="textChanges()"
                  rows="10">{{ transcription }}</textarea>
        <div class="buttons-container">
            <div class="copy-button-container">
                <button onclick="copyToClipboard()">Copy</button>
                <p id="copyAlert"></p>
            </div>
            <div>
                <input name="next" type="submit" value="Next >> Smart Edit">
            </div>
        </div>
    </form>
    
    
    <!-- <div class="content transcribe">
        <h3>Transcribe</h3>
    </div>
    <div class="content paragraph-breaks">
        <h3>Add paragraph breaks</h3>
    </div>
    <div class="content edit">
        <h3>Edit</h3>
    </div>
    <div>
        <p>
            AI Assistant Response: {{ content }}
            Learn more about this project by visiting the <a href="{{ url_for('pages.past') }}">Past Recordings page</a>. 
        </p> 
    </div> -->
    
{% endblock content %}